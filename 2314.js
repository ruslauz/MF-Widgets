(self.webpackChunk_my_reports_widgets=self.webpackChunk_my_reports_widgets||[]).push([[2314],{2066:(e,t,n)=>{"use strict";n.d(t,{Z:()=>T});var r=n(8481),i=n(2122),s=n(6610),a=n(5991),o=n(3349),f=n(379),l=n(6070),c=n(7608),u=n(6156),x=n(1320),d=n(7700),h=n.n(d),g=n(9916);function p(e,t){const n=function(e){const t=[];for(let n=0;n<e.length;++n)for(let r=n+1;r<e.length;++r){const i=b(e[n],e[r]);for(const e of i)e.parentIndex=[n,r],t.push(e)}return t}(e),r=n.filter((t=>function(e,t){return t.every((t=>m(e,t)<t.radius+1e-10))}(t,e)));let i=0,s=0;const a=[];if(r.length>1){const t=function(e){const t={x:0,y:0};for(const n of e)t.x+=n.x,t.y+=n.y;return t.x/=e.length,t.y/=e.length,t}(r);for(let e=0;e<r.length;++e){const n=r[e];n.angle=Math.atan2(n.x-t.x,n.y-t.y)}r.sort(((e,t)=>t.angle-e.angle));let n=r[r.length-1];for(let t=0;t<r.length;++t){const o=r[t];s+=(n.x+o.x)*(o.y-n.y);const f={x:(o.x+n.x)/2,y:(o.y+n.y)/2};let l=null;for(let t=0;t<o.parentIndex.length;++t)if(n.parentIndex.includes(o.parentIndex[t])){const r=e[o.parentIndex[t]],i=Math.atan2(o.x-r.x,o.y-r.y),s=Math.atan2(n.x-r.x,n.y-r.y);let a=s-i;a<0&&(a+=2*Math.PI);const c=s-a/2;let u=m(f,{x:r.x+r.radius*Math.sin(c),y:r.y+r.radius*Math.cos(c)});u>2*r.radius&&(u=2*r.radius),(null==l||l.width>u)&&(l={circle:r,width:u,p1:o,p2:n,large:u>r.radius,sweep:!0})}null!=l&&(a.push(l),i+=y(l.circle.radius,l.width),n=o)}}else{let t=e[0];for(let n=1;n<e.length;++n)e[n].radius<t.radius&&(t=e[n]);let n=!1;for(let r=0;r<e.length;++r)if(m(e[r],t)>Math.abs(t.radius-e[r].radius)){n=!0;break}n?i=s=0:(i=t.radius*t.radius*Math.PI,a.push({circle:t,p1:{x:t.x,y:t.y+t.radius},p2:{x:t.x-1e-10,y:t.y+t.radius},width:2*t.radius,large:!0,sweep:!0}))}return s/=2,t&&(t.area=i+s,t.arcArea=i,t.polygonArea=s,t.arcs=a,t.innerPoints=r,t.intersectionPoints=n),i+s}function y(e,t){return e*e*Math.acos(1-t/e)-(e-t)*Math.sqrt(t*(2*e-t))}function m(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}function v(e,t,n){if(n>=e+t)return 0;if(n<=Math.abs(e-t))return Math.PI*Math.min(e,t)*Math.min(e,t);const r=t-(n*n-e*e+t*t)/(2*n);return y(e,e-(n*n-t*t+e*e)/(2*n))+y(t,r)}function b(e,t){const n=m(e,t),r=e.radius,i=t.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const s=(r*r-i*i+n*n)/(2*n),a=Math.sqrt(r*r-s*s),o=e.x+s*(t.x-e.x)/n,f=e.y+s*(t.y-e.y)/n,l=-(t.y-e.y)*(a/n),c=-(t.x-e.x)*(a/n);return[{x:o+l,y:f-c},{x:o-l,y:f+c}]}function M(e,t,n){return Math.min(e,t)*Math.min(e,t)*Math.PI<=n+1e-10?Math.abs(e-t):(0,g.bisect)((r=>v(e,t,r)-n),0,e+t)}function _(e,t={}){let n=function(e,t){const n=t&&t.lossFunction?t.lossFunction:k,r={},i={};for(const t of e)if(1===t.sets.length){const e=t.sets[0];r[e]={x:1e10,y:1e10,rowid:r.length,size:t.size,radius:Math.sqrt(t.size/Math.PI)},i[e]=[]}e=e.filter((e=>2===e.sets.length));for(const t of e){let e=null!=t.weight?t.weight:1;const n=t.sets[0],s=t.sets[1];t.size+1e-10>=Math.min(r[n].size,r[s].size)&&(e=0),i[n].push({set:s,size:t.size,weight:e}),i[s].push({set:n,size:t.size,weight:e})}const s=[];function a(e,t){return t.size-e.size}Object.keys(i).forEach((e=>{let t=0;for(let n=0;n<i[e].length;++n)t+=i[e][n].size*i[e][n].weight;s.push({set:e,size:t})})),s.sort(a);const o={};function f(e){return e.set in o}function l(e,t){r[t].x=e.x,r[t].y=e.y,o[t]=!0}l({x:0,y:0},s[0].set);for(let t=1;t<s.length;++t){const o=s[t].set,u=i[o].filter(f),x=r[o];if(u.sort(a),0===u.length)throw"ERROR: missing pairwise overlap information";const d=[];for(var c=0;c<u.length;++c){const e=r[u[c].set],t=M(x.radius,e.radius,u[c].size);d.push({x:e.x+t,y:e.y}),d.push({x:e.x-t,y:e.y}),d.push({y:e.y+t,x:e.x}),d.push({y:e.y-t,x:e.x});for(let n=c+1;n<u.length;++n){const i=r[u[n].set],s=M(x.radius,i.radius,u[n].size),a=b({x:e.x,y:e.y,radius:t},{x:i.x,y:i.y,radius:s});d.push(...a)}}let h=1e50,g=d[0];for(const t of d){r[o].x=t.x,r[o].y=t.y;const i=n(r,e);i<h&&(h=i,g=t)}l(g,o)}return r}(e,t);const r=t.lossFunction||k;if(e.length>=8){const i=function(e,t={}){const n=t.restarts||10,r=[],i={};for(const t of e)1===t.sets.length&&(i[t.sets[0]]=r.length,r.push(t));let{distances:s,constraints:a}=function(e,t,n){const r=(0,g.zerosM)(t.length,t.length),i=(0,g.zerosM)(t.length,t.length);return e.filter((e=>2===e.sets.length)).forEach((e=>{const s=n[e.sets[0]],a=n[e.sets[1]],o=M(Math.sqrt(t[s].size/Math.PI),Math.sqrt(t[a].size/Math.PI),e.size);r[s][a]=r[a][s]=o;let f=0;e.size+1e-10>=Math.min(t[s].size,t[a].size)?f=1:e.size<=1e-10&&(f=-1),i[s][a]=i[a][s]=f})),{distances:r,constraints:i}}(e,r,i);const o=(0,g.norm2)(s.map(g.norm2))/s.length;s=s.map((e=>e.map((e=>e/o))));const f=(e,t)=>function(e,t,n,r){for(let e=0;e<t.length;++e)t[e]=0;let i=0;for(let s=0;s<n.length;++s){const a=e[2*s],o=e[2*s+1];for(let f=s+1;f<n.length;++f){const l=e[2*f],c=e[2*f+1],u=n[s][f],x=r[s][f],d=(l-a)*(l-a)+(c-o)*(c-o),h=Math.sqrt(d),g=d-u*u;x>0&&h<=u||x<0&&h>=u||(i+=2*g*g,t[2*s]+=4*g*(a-l),t[2*s+1]+=4*g*(o-c),t[2*f]+=4*g*(l-a),t[2*f+1]+=4*g*(c-o))}}return i}(e,t,s,a);let l=null;for(let e=0;e<n;++e){const e=(0,g.zeros)(2*s.length).map(Math.random),n=(0,g.conjugateGradient)(f,e,t);(!l||n.fx<l.fx)&&(l=n)}const c=l.x,u={};for(let e=0;e<r.length;++e){const t=r[e];u[t.sets[0]]={x:c[2*e]*o,y:c[2*e+1]*o,radius:Math.sqrt(t.size/Math.PI)}}if(t.history)for(const e of t.history)(0,g.scale)(e.x,o);return u}(e,t);r(i,e)+1e-8<r(n,e)&&(n=i)}return n}function k(e,t){let n=0;for(const r of t){if(1===r.sets.length)continue;let t;if(2===r.sets.length){const n=e[r.sets[0]],i=e[r.sets[1]];t=v(n.radius,i.radius,m(n,i))}else t=p(r.sets.map((t=>e[t])));n+=(null!=r.weight?r.weight:1)*(t-r.size)*(t-r.size)}return n}function w(e,t,n){if(null==n?e.sort(((e,t)=>t.radius-e.radius)):e.sort(n),e.length>0){const t=e[0].x,n=e[0].y;for(const r of e)r.x-=t,r.y-=n}if(2===e.length&&m(e[0],e[1])<Math.abs(e[1].radius-e[0].radius)&&(e[1].x=e[0].x+e[0].radius-e[1].radius-1e-10,e[1].y=e[0].y),e.length>1){const n=Math.atan2(e[1].x,e[1].y)-t,r=Math.cos(n),i=Math.sin(n);for(const t of e){const e=t.x,n=t.y;t.x=r*e-i*n,t.y=i*e+r*n}}if(e.length>2){let n=Math.atan2(e[2].x,e[2].y)-t;for(;n<0;)n+=2*Math.PI;for(;n>2*Math.PI;)n-=2*Math.PI;if(n>Math.PI){const t=e[1].y/(1e-10+e[1].x);for(const n of e){var r=(n.x+t*n.y)/(1+t*t);n.x=2*r-n.x,n.y=2*r*t-n.y}}}}function I(e){const t=t=>({max:e.reduce(((e,n)=>Math.max(e,n[t]+n.radius)),Number.NEGATIVE_INFINITY),min:e.reduce(((e,n)=>Math.min(e,n[t]-n.radius)),Number.POSITIVE_INFINITY)});return{xRange:t("x"),yRange:t("y")}}function z(e){const t={};for(const n of e)t[n.setid]=n;return t}function R(e){return Object.keys(e).map((t=>Object.assign(e[t],{setid:t})))}function E(e,t){return function(e,t){if(0===e.length)return"M 0 0";const n=Math.pow(10,t||0),r=null!=t?e=>Math.round(e*n)/n:e=>e;if(1==e.length){const t=e[0].circle;return function(e,t,n){const r=[];return r.push("\nM",e,t),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}(r(t.x),r(t.y),r(t.radius))}const i=["\nM",r(e[0].p2.x),r(e[0].p2.y)];for(const t of e){const e=r(t.circle.radius);i.push("\nA",e,e,0,t.large?1:0,t.sweep?1:0,r(t.p1.x),r(t.p1.y))}return i.join(" ")}(function(e){if(0===e.length)return[];const t={};return p(e,t),t.arcs}(e),t)}var P=n(5889),Z=n(8395),S=n(8983),j=n(9881),C=n(8609);var O=(x.B.insert(".___SCircle_15r3k_gg_{fill:#59ddaa;stroke:#fff;stroke-width:2px;fill-opacity:.5;transition-property:cx,cy;transition-duration:var(--duration_15r3k);transition-timing-function:ease-in-out}.___SCircle_15r3k_gg_:hover{fill-opacity:.7}.___SCircle_15r3k_gg_.__color_15r3k_gg_{fill:var(--color_15r3k)}.___SIntersection_15r3k_gg_{stroke:#fff;stroke-width:2px;fill-opacity:0}.___SIntersection_15r3k_gg_:hover{fill-opacity:.1}","15r3k_gg_"),{__SCircle:"___SCircle_15r3k_gg_","--duration":"--duration_15r3k",_color:"__color_15r3k_gg_","--color":"--color_15r3k",__SIntersection:"___SIntersection_15r3k_gg_"}),D=function(e){(0,f.Z)(d,e);var t,n,x=(t=d,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,c.Z)(t);if(n){var i=(0,c.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,l.Z)(this,e)});function d(){var e;(0,s.Z)(this,d);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=x.call.apply(x,[this].concat(n)),(0,u.Z)((0,o.Z)(e),"virtualElement",(0,Z.default)()?document.createElement("div"):{}),(0,u.Z)((0,o.Z)(e),"bindHandlerTooltip",(function(t,n){return function(r){var i=r.clientX,s=r.clientY,a=e.asProps.eventEmitter;e.virtualElement.getBoundingClientRect=e.generateGetBoundingClientRect(i,s),e.virtualElement[C.s.VIRTUAL_ELEMENT]=!0,a.emit("onTooltipVisible",t,n,e.virtualElement)}})),(0,u.Z)((0,o.Z)(e),"renderElement",h().forwardRef((function(e,t){return h().createElement(S.Z,(0,i.Z)({ref:t,tag:"g",visible:!0},e))}))),e}return(0,a.Z)(d,[{key:"generateGetBoundingClientRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(){return{width:0,height:0,top:t,right:e,bottom:t,left:e}}}},{key:"getVennData",value:function(){var e=this.asProps,t=e.data,n=e.orientation,i=e.orientationOrder,s=e.size,a=(0,r.Z)(s,2),o=a[0],f=a[1],l=Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return{sets:n.split("/"),size:i}}));return function(e,t,n,r,i){const s=R(e);t-=2*r,n-=2*r;const{xRange:a,yRange:o}=I(s);if(a.max===a.min||o.max===o.min)return console.log("not scaling solution: zero size detected"),e;let f,l;if(i){const e=2*Math.sqrt(i/Math.PI);f=t/e,l=n/e}else f=t/(a.max-a.min),l=n/(o.max-o.min);const c=Math.min(l,f),u=(t-(a.max-a.min)*c)/2,x=(n-(o.max-o.min)*c)/2;return z(s.map((e=>({radius:c*e.radius,x:r+u+(e.x-a.min)*c,y:r+x+(e.y-o.min)*c,setid:e.setid}))))}(function(e,t,n){null==t&&(t=Math.PI/2);let r=R(e).map((e=>Object.assign({},e)));const i=function(e){function t(e){return e.parent!==e&&(e.parent=t(e.parent)),e.parent}function n(e,n){const r=t(e),i=t(n);r.parent=i}e.forEach((e=>{e.parent=e}));for(let t=0;t<e.length;++t)for(let r=t+1;r<e.length;++r){const i=e[t].radius+e[r].radius;m(e[t],e[r])+1e-10<i&&n(e[r],e[t])}const r=new Map;for(let n=0;n<e.length;++n){const i=t(e[n]).parent.setid;r.has(i)||r.set(i,[]),r.get(i).push(e[n])}return e.forEach((e=>{delete e.parent})),Array.from(r.values())}(r);for(const e of i){w(e,t,n);const r=I(e);e.size=(r.xRange.max-r.xRange.min)*(r.yRange.max-r.yRange.min),e.bounds=r}i.sort(((e,t)=>t.size-e.size)),r=i[0];let s=r.bounds;const a=(s.xRange.max-s.xRange.min)/50;function o(e,t,n){if(!e)return;const i=e.bounds;let o,f;if(t)o=s.xRange.max-i.xRange.min+a;else{o=s.xRange.max-i.xRange.max;const e=(i.xRange.max-i.xRange.min)/2-(s.xRange.max-s.xRange.min)/2;e<0&&(o+=e)}if(n)f=s.yRange.max-i.yRange.min+a;else{f=s.yRange.max-i.yRange.max;const e=(i.yRange.max-i.yRange.min)/2-(s.yRange.max-s.yRange.min)/2;e<0&&(f+=e)}for(const t of e)t.x+=o,t.y+=f,r.push(t)}let f=1;for(;f<i.length;)o(i[f],!0,!1),o(i[f+1],!1,!0),o(i[f+2],!0,!0),f+=3,s=I(r);return z(r)}(function(e,t={}){t.maxIterations=t.maxIterations||500;const n=t.initialLayout||_,r=t.lossFunction||k,i=function(e,t={}){const n=t.distinct,r=e.map((e=>Object.assign({},e)));function i(e){return e.join(";")}if(n){const e=new Map;for(const t of r)for(let n=0;n<t.sets.length;n++){const r=String(t.sets[n]);e.set(r,t.size+(e.get(r)||0));for(let i=n+1;i<t.sets.length;i++){const n=String(t.sets[i]),s=`${r};${n}`,a=`${n};${r}`;e.set(s,t.size+(e.get(s)||0)),e.set(a,t.size+(e.get(a)||0))}}for(const t of r)t.sets.length<3&&(t.size=e.get(i(t.sets)))}const s=[],a=new Set;for(const e of r)if(1===e.sets.length)s.push(e.sets[0]);else if(2===e.sets.length){const t=e.sets[0],n=e.sets[1];a.add(i(e.sets)),a.add(i([n,t]))}s.sort(((e,t)=>e===t?0:e<t?-1:1));for(let e=0;e<s.length;++e){const t=s[e];for(let n=e+1;n<s.length;++n){const e=s[n];a.has(i([t,e]))||r.push({sets:[t,e],size:0})}}return r}(e,t),s=n(i,t),a=Object.keys(s),o=[];for(const e of a)o.push(s[e].x),o.push(s[e].y);const f=(0,g.nelderMead)((e=>{const t={};for(let n=0;n<a.length;++n){const r=a[n];t[r]={x:e[2*n],y:e[2*n+1],radius:s[r].radius}}return r(t,i)}),o,t).x;for(let e=0;e<a.length;++e){const t=a[e];s[t].x=f[2*e],s[t].y=f[2*e+1]}return s}(l),n,i),o,f,10)}},{key:"getCircleProps",value:function(e){return{duration:this.asProps.duration,data:this.vennData[e.dataKey],onMouseMove:this.bindHandlerTooltip(!0,e),onMouseLeave:this.bindHandlerTooltip(!1,e)}}},{key:"getIntersectionProps",value:function(e){var t=this.asProps.duration,n=e.dataKey.split("/");return{duration:t,delay:t,data:Object.values(this.vennData).filter((function(e){return n.includes(e.setid)})),onMouseMove:this.bindHandlerTooltip(!0,e),onMouseLeave:this.bindHandlerTooltip(!1,e)}}},{key:"render",value:function(){var e=this.Element;return this.vennData=this.getVennData(),h().createElement(e,{render:this.renderElement,childrenPosition:"inside",vennData:this.vennData})}}]),d}(P.w);(0,u.Z)(D,"displayName","Venn"),(0,u.Z)(D,"style",O),(0,u.Z)(D,"defaultProps",{orientation:Math.PI/2,orientationOrder:function(e,t){return t.radius-e.radius},duration:500});const T=(0,j.Z)(D,{Circle:function(e){var t,n=e.Element,r=e.styles,i=e.color,s=e.data,a=e.duration;return t=(0,x.B)(r),h().createElement(n,t.cn("SCircle",{render:"circle",color:i,cx:s.x,cy:s.y,r:s.radius,"use:duration":"".concat(a,"ms")}))},Intersection:function(e){var t,n=e.Element,r=e.styles,s=e.data,a=h().useCallback(h().forwardRef((function(e,t){return h().createElement(S.Z,(0,i.Z)({ref:t,tag:"path",visible:!0},e))})),[e]);return t=(0,x.B)(r),h().createElement(n,t.cn("SIntersection",{render:a,d:E(s)}))}})},1655:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});var r={"blue-01":"#c4e5fe","blue-02":"#8ecdff","blue-03":"#2bb3ff","blue-04":"#008ff8","blue-05":"#006dca","green-01":"#9ef2c9","green-02":"#59ddaa","green-03":"#00c192","green-04":"#009f81","green-05":"#007c65","orange-01":"#ffdca2","orange-02":"#ffb26e","orange-03":"#ff8c43","orange-04":"#ff622d","orange-05":"#c33909","pink-01":"#ffd3ff","pink-02":"#ffa9fa","pink-03":"#f67cf2","pink-04":"#e14adf","pink-05":"#b229b9","violet-01":"#edd9ff","violet-02":"#dcb8ff","violet-03":"#c695ff","violet-04":"#ab6cfe","violet-05":"#8649e1","red-01":"#ffd7df","red-02":"#ffaeb5","red-03":"#ff8786","red-04":"#ff4953","red-05":"#d1002f","yellow-01":"#fce081","yellow-02":"#fdc23c","yellow-03":"#ef9800","yellow-04":"#d87900","yellow-05":"#a75800","salad-01":"#c7ee96","salad-02":"#9bd85d","salad-03":"#66c030","salad-04":"#35a21e","salad-05":"#0a7e22","gray-01":"#c4c7cf","gray-50":"#f4f5f9","gray-100":"#e0e1e9","gray-200":"#c4c7cf","gray-300":"#a9abb6","gray-400":"#8a8e9b","gray-500":"#6c6e79","gray-600":"#484a54","gray-700":"#2b2e38","gray-800":"#191b23","blue-50":"#e9f7ff","blue-100":"#c4e5fe","blue-200":"#8ecdff","blue-300":"#2bb3ff","blue-400":"#008ff8","blue-500":"#006dca","blue-600":"#044792","blue-700":"#002b5f","blue-800":"#001b3d","green-100":"#9ef2c9","green-200":"#59ddaa","green-300":"#00c192","green-400":"#009f81","green-50":"#dbfee8","green-500":"#007c65","green-600":"#055345","green-700":"#00342d","green-800":"#00201e","salad-100":"#c7ee96","salad-200":"#9bd85d","salad-300":"#66c030","salad-400":"#35a21e","salad-50":"#ecfbcd","salad-500":"#0a7e22","salad-600":"#005613","salad-700":"#003509","salad-800":"#002203","orange-50":"#fff3d9","orange-100":"#ffdca2","orange-200":"#ffb26e","orange-300":"#ff8c43","orange-400":"#ff622d","orange-500":"#c33909","orange-600":"#8b1500","orange-700":"#551200","orange-800":"#351000","yellow-100":"#fce081","yellow-200":"#fdc23c","yellow-300":"#ef9800","yellow-400":"#d87900","yellow-50":"#fdf7c8","yellow-500":"#a75800","yellow-600":"#743a00","yellow-700":"#462500","yellow-800":"#2c1600","red-100":"#ffd7df","red-200":"#ffaeb5","red-300":"#ff8786","red-400":"#ff4953","red-50":"#fff0f7","red-500":"#d1002f","red-600":"#8e0016","red-700":"#58000a","red-800":"#410101","pink-100":"#ffd3ff","pink-200":"#ffa9fa","pink-300":"#f67cf2","pink-400":"#e14adf","pink-50":"#fff0ff","pink-500":"#b229b9","pink-600":"#7d0480","pink-700":"#4d0050","pink-800":"#340439","violet-100":"#edd9ff","violet-200":"#dcb8ff","violet-300":"#c695ff","violet-400":"#ab6cfe","violet-50":"#f9f2ff","violet-500":"#8649e1","violet-600":"#5925ab","violet-700":"#421984","violet-800":"#220358"};Object.keys(r).sort((function(e,t){return parseInt(e.match(/[0-9]/g).join(""),10)-parseInt(t.match(/[0-9]/g).join(""),10)}))},9916:function(e,t){!function(e){"use strict";function t(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function n(e,t){for(var n=0,r=0;r<e.length;++r)n+=e[r]*t[r];return n}function r(e){return Math.sqrt(n(e,e))}function i(e,t,n){for(var r=0;r<t.length;++r)e[r]=t[r]*n}function s(e,t,n,r,i){for(var s=0;s<e.length;++s)e[s]=t*n[s]+r*i[s]}function a(e,t,r,i,a,o,f){var l=r.fx,c=n(r.fxprime,t),u=l,x=l,d=c,h=0;function g(x,h,g){for(var p=0;p<16;++p)if(a=(x+h)/2,s(i.x,1,r.x,a,t),u=i.fx=e(i.x,i.fxprime),d=n(i.fxprime,t),u>l+o*a*c||u>=g)h=a;else{if(Math.abs(d)<=-f*c)return a;d*(h-x)>=0&&(h=x),x=a,g=u}return 0}a=a||1,o=o||1e-6,f=f||.1;for(var p=0;p<10;++p){if(s(i.x,1,r.x,a,t),u=i.fx=e(i.x,i.fxprime),d=n(i.fxprime,t),u>l+o*a*c||p&&u>=x)return g(h,a,x);if(Math.abs(d)<=-f*c)return a;if(d>=0)return g(a,h,u);x=u,h=a,a*=2}return a}e.bisect=function(e,t,n,r){var i=(r=r||{}).maxIterations||100,s=r.tolerance||1e-10,a=e(t),o=e(n),f=n-t;if(a*o>0)throw"Initial bisect points must have opposite signs";if(0===a)return t;if(0===o)return n;for(var l=0;l<i;++l){var c=t+(f/=2),u=e(c);if(u*a>=0&&(t=c),Math.abs(f)<s||0===u)return c}return t+f},e.nelderMead=function(e,t,n){var r,i=(n=n||{}).maxIterations||200*t.length,a=n.nonZeroDelta||1.05,o=n.zeroDelta||.001,f=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,u=void 0!==n.chi?n.chi:2,x=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,h=t.length,g=new Array(h+1);g[0]=t,g[0].fx=e(t),g[0].id=0;for(var p=0;p<h;++p){var y=t.slice();y[p]=y[p]?y[p]*a:o,g[p+1]=y,g[p+1].fx=e(y),g[p+1].id=p+1}function m(e){for(var t=0;t<e.length;t++)g[h][t]=e[t];g[h].fx=e.fx}for(var v=function(e,t){return e.fx-t.fx},b=t.slice(),M=t.slice(),_=t.slice(),k=t.slice(),w=0;w<i;++w){if(g.sort(v),n.history){var I=g.map((function(e){var t=e.slice();return t.fx=e.fx,t.id=e.id,t}));I.sort((function(e,t){return e.id-t.id})),n.history.push({x:g[0].slice(),fx:g[0].fx,simplex:I})}for(r=0,p=0;p<h;++p)r=Math.max(r,Math.abs(g[0][p]-g[1][p]));if(Math.abs(g[0].fx-g[h].fx)<f&&r<l)break;for(p=0;p<h;++p){b[p]=0;for(var z=0;z<h;++z)b[p]+=g[z][p];b[p]/=h}var R=g[h];if(s(M,1+c,b,-c,R),M.fx=e(M),M.fx<g[0].fx)s(k,1+u,b,-u,R),k.fx=e(k),k.fx<M.fx?m(k):m(M);else if(M.fx>=g[h-1].fx){var E=!1;if(M.fx>R.fx?(s(_,1+x,b,-x,R),_.fx=e(_),_.fx<R.fx?m(_):E=!0):(s(_,1-x*c,b,x*c,R),_.fx=e(_),_.fx<M.fx?m(_):E=!0),E){if(d>=1)break;for(p=1;p<g.length;++p)s(g[p],1-d,g[0],d,g[p]),g[p].fx=e(g[p])}}else m(M)}return g.sort(v),{fx:g[0].fx,x:g[0]}},e.conjugateGradient=function(e,t,o){var f,l,c,u={x:t.slice(),fx:0,fxprime:t.slice()},x={x:t.slice(),fx:0,fxprime:t.slice()},d=t.slice(),h=1;c=(o=o||{}).maxIterations||20*t.length,u.fx=e(u.x,u.fxprime),i(f=u.fxprime.slice(),u.fxprime,-1);for(var g=0;g<c;++g){if(h=a(e,f,u,x,h),o.history&&o.history.push({x:u.x.slice(),fx:u.fx,fxprime:u.fxprime.slice(),alpha:h}),h){s(d,1,x.fxprime,-1,u.fxprime);var p=n(u.fxprime,u.fxprime);s(f,Math.max(0,n(d,x.fxprime)/p),f,-1,x.fxprime),l=u,u=x,x=l}else i(f,u.fxprime,-1);if(r(u.fxprime)<=1e-5)break}return o.history&&o.history.push({x:u.x.slice(),fx:u.fx,fxprime:u.fxprime.slice(),alpha:h}),u},e.gradientDescent=function(e,t,n){for(var i=(n=n||{}).maxIterations||100*t.length,a=n.learnRate||.001,o={x:t.slice(),fx:0,fxprime:t.slice()},f=0;f<i&&(o.fx=e(o.x,o.fxprime),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice()}),s(o.x,1,o.x,-a,o.fxprime),!(r(o.fxprime)<=1e-5));++f);return o},e.gradientDescentLineSearch=function(e,t,n){n=n||{};var s,o={x:t.slice(),fx:0,fxprime:t.slice()},f={x:t.slice(),fx:0,fxprime:t.slice()},l=n.maxIterations||100*t.length,c=n.learnRate||1,u=t.slice(),x=n.c1||.001,d=n.c2||.1,h=[];if(n.history){var g=e;e=function(e,t){return h.push(e.slice()),g(e,t)}}o.fx=e(o.x,o.fxprime);for(var p=0;p<l&&(i(u,o.fxprime,-1),c=a(e,u,o,f,c,x,d),n.history&&(n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),functionCalls:h,learnRate:c,alpha:c}),h=[]),s=o,o=f,f=s,!(0===c||r(o.fxprime)<1e-5));++p);return o},e.zeros=t,e.zerosM=function(e,n){return t(e).map((function(){return t(n)}))},e.norm2=r,e.weightedSum=s,e.scale=i}(t)}}]);